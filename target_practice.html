<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼ë… ë§ì¶”ê¸° ê²Œì„</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background: #f0f4f8; /* ì—°í•œ íšŒìƒ‰ ë°°ê²½ */
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            justify-content: center;
            align-items: center;
            color: #333;
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }
        h1 {
            color: #1a4d2e; /* ì§„í•œ ë…¹ìƒ‰ */
            font-size: 2.8em;
            margin-bottom: 10px; /* ê°„ê²© ì¡°ì • */
        }
        #instruction {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 10px;
        }
        #gameInfo {
            font-size: 1.8em;
            font-weight: bold;
            color: #2e8b57; /* ì¤‘ê°„ ë…¹ìƒ‰ */
            margin-bottom: 20px;
        }
        #scoreDisplay, #timerDisplay {
            margin: 0 10px;
        }

        #targetContainer {
            width: 400px; /* ê³¼ë…íŒ ì „ì²´ í¬ê¸° */
            height: 400px;
            position: relative; /* ìì‹ ìš”ì†Œì˜ ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•´ */
            margin: 20px auto;
            border-radius: 50%; /* ì „ì²´ë¥¼ ì›í˜•ìœ¼ë¡œ */
            overflow: hidden; /* ì›í˜• ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ë¶€ë¶„ ìˆ¨ê¹€ */
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            cursor: crosshair; /* ì‹­ì ëª¨ì–‘ ì»¤ì„œ */
            background-color: #fff; /* ê¸°ë³¸ ë°°ê²½ìƒ‰ */
        }

        .target-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            /* display: flex; ì´ ì†ì„±ì€ ì œê±°í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ ë°©ì§€ */
            /* justify-content: center; */
            /* align-items: center; */
            font-weight: bold;
            color: white; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            box-shadow: inset 0 0 5px rgba(0,0,0,0.3); /* ì•ˆìª½ ê·¸ë¦¼ì */
            /* font-size: 1.8em; ì´ ì†ì„±ì€ .ring-scoreê°€ ë®ì–´ì”ë‹ˆë‹¤ */
            /* text-shadow: 1px 1px 2px rgba(0,0,0,0.5); */
        }
        
        /* 10ì  ë§ì˜ ì ìˆ˜ë§Œ íŠ¹ë³„íˆ ì¤‘ì•™ì— í‘œì‹œ */
        .ring-10 {
            display: flex; /* 10ì  ë§ë§Œ ë‹¤ì‹œ flexbox ì‚¬ìš©í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ */
            justify-content: center;
            align-items: center;
            font-size: 1.8em; /* 10ì  í°íŠ¸ í¬ê¸° */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* ê·¸ë¦¼ì */
        }

        /* .ring-scoreëŠ” ì´ì œ 10ì  ë§ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. */
        .ring-score {
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ ë°©í•´í•˜ì§€ ì•ŠìŒ */
            /* ë‚˜ë¨¸ì§€ ì ìˆ˜ í…ìŠ¤íŠ¸ëŠ” JSì—ì„œ ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì´ ìŠ¤íƒ€ì¼ì€ 10ì  ë§ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. */
        }


        /* ê³¼ë… ë§ ìŠ¤íƒ€ì¼ (ì ìˆ˜ë³„ë¡œ í¬ê¸°ì™€ ìƒ‰ìƒ ì •ì˜) */
        .ring-5 { width: 400px; height: 400px; background-color: #4682b4; } /* íŒŒë‘ */
        .ring-6 { width: 320px; height: 320px; background-color: #1e90ff; } /* í•˜ëŠ˜ìƒ‰ */
        .ring-7 { width: 240px; height: 240px; background-color: #3cb371; } /* ì´ˆë¡ */
        .ring-8 { width: 160px; height: 160px; background-color: #ffd700; } /* ë…¸ë‘ */
        .ring-9 { width: 80px; height: 80px; background-color: #dc143c; } /* ë¹¨ê°• */
        .ring-10 { width: 40px; height: 40px; background-color: #000; } /* ê²€ì • ì¤‘ì•™ (í™©ì†Œ ëˆˆ) */


        #hitMarker {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: rgb(255, 0, 0); /* ë¹¨ê°„ìƒ‰ ì  */
            border-radius: 50%;
            transform: translate(-50%, -50%); /* ì¤‘ì•™ ì •ë ¬ */
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ ë°©í•´í•˜ì§€ ì•ŠìŒ */
            opacity: 0; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
            transition: opacity 0.1s ease-out;
            z-index: 100; /* ê³¼ë… ìœ„ì— í‘œì‹œ */
        }

        #message {
            font-size: 1.5em;
            font-weight: bold;
            color: #c2185b;
            min-height: 1.5em;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .start-buttons button {
            padding: 15px 30px;
            font-size: 1.8em;
            font-weight: bold;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            margin: 10px 5px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
        }
        .start-buttons button:hover {
            background-color: #0056b3;
        }
        .start-buttons button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        #resetButton {
            background-color: #6c757d; /* íšŒìƒ‰ */
        }
        #resetButton:hover {
            background-color: #5a6268;
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 600px) {
            h1 {
                font-size: 2.2em;
            }
            #instruction {
                font-size: 1em;
            }
            #gameInfo {
                font-size: 1.5em;
            }
            #targetContainer {
                width: 300px;
                height: 300px;
            }
            .target-ring.ring-5 { width: 300px; height: 300px; }
            .target-ring.ring-6 { width: 240px; height: 240px; }
            .target-ring.ring-7 { width: 180px; height: 180px; }
            .target-ring.ring-8 { width: 120px; height: 120px; }
            .target-ring.ring-9 { width: 60px; height: 60px; }
            .target-ring.ring-10 { width: 30px; height: 30px; }
            
            /* ëª¨ë°”ì¼ì—ì„œ 10ì  ë§ í°íŠ¸ í¬ê¸° ì¡°ì • */
            .ring-10 {
                font-size: 1.5em; /* ëª¨ë°”ì¼ì—ì„œ 10ì  í°íŠ¸ í¬ê¸° */
            }

            .start-buttons button {
                padding: 12px 25px;
                font-size: 1.5em;
            }
            #message {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ ê³¼ë… ë§ì¶”ê¸° ê²Œì„! ğŸ¹</h1>
    <div id="instruction">í™”ë©´ì„ í„°ì¹˜í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì ìˆ˜ë¥¼ íšë“í•˜ì„¸ìš”!</div>
    <div id="gameInfo">
        <span id="scoreDisplay">ì ìˆ˜: 0</span> | <span id="timerDisplay">ë‚¨ì€ ì‹œê°„: 30ì´ˆ</span>
    </div>

    <div id="targetContainer">
        <div id="hitMarker"></div> </div>
    
    <div id="message">ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!</div>

    <div class="start-buttons">
        <button id="startButton30">30ì´ˆ ì‹œì‘</button>
        <button id="startButton60">1ë¶„ ì‹œì‘</button>
        <button id="resetButton" style="display: none;">ë‹¤ì‹œ ì‹œì‘</button>
    </div>

    <script>
        const targetContainer = document.getElementById('targetContainer');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const messageDisplay = document.getElementById('message');
        const startButton30 = document.getElementById('startButton30');
        const startButton60 = document.getElementById('startButton60');
        const resetButton = document.getElementById('resetButton');
        const hitMarker = document.getElementById('hitMarker');

        let score = 0;
        let timeLeft = 30; // ê¸°ë³¸ ì‹œê°„ 30ì´ˆ
        let gameInterval;
        let gameActive = false;
        let selectedDuration = 30; // í˜„ì¬ ì„ íƒëœ ê²Œì„ ì‹œê°„ (ì´ˆ)

        const targetRingsConfig = [
            { score: 10, class: 'ring-10', sizeRatio: 0.1 }, // ê°€ì¥ ì•ˆìª½ ê²€ì •
            { score: 9, class: 'ring-9', sizeRatio: 0.2 },   // ë¹¨ê°•
            { score: 8, class: 'ring-8', sizeRatio: 0.4 },   // ë…¸ë‘
            { score: 7, class: 'ring-7', sizeRatio: 0.6 },   // ì´ˆë¡
            { score: 6, class: 'ring-6', sizeRatio: 0.8 },   // í•˜ëŠ˜ìƒ‰
            { score: 5, class: 'ring-5', sizeRatio: 1.0 }    // ê°€ì¥ ë°”ê¹¥ìª½ íŒŒë‘
        ];

        // ê³¼ë… ë§ ìƒì„± í•¨ìˆ˜
        function createTargetRings() {
            targetContainer.innerHTML = ''; // ê¸°ì¡´ ë§ ì œê±°
            // ê°€ì¥ ë°”ê¹¥ ë§ë¶€í„° ì•ˆìª½ìœ¼ë¡œ ê·¸ë ¤ì•¼ ê²¹ì³ì„œ ë³´ì„
            for (let i = targetRingsConfig.length - 1; i >= 0; i--) {
                const ring = targetRingsConfig[i];
                const ringDiv = document.createElement('div');
                ringDiv.classList.add('target-ring', ring.class);
                ringDiv.style.width = `${targetContainer.offsetWidth * ring.sizeRatio}px`;
                ringDiv.style.height = `${targetContainer.offsetHeight * ring.sizeRatio}px`;
                
                // âœ¨ 10ì  ë§ì—ë§Œ ì ìˆ˜ í…ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
                if (ring.score === 10) {
                    ringDiv.textContent = ring.score; // 10ì  í…ìŠ¤íŠ¸ ì¶”ê°€
                }
                
                targetContainer.appendChild(ringDiv);
            }
            targetContainer.appendChild(hitMarker); // ë§ˆì»¤ê°€ í•­ìƒ ê°€ì¥ ìœ„ì— ìˆë„ë¡ ë‹¤ì‹œ ì¶”ê°€
        }

        function calculateScore(clickX, clickY) {
            const containerRect = targetContainer.getBoundingClientRect();
            const centerX = containerRect.width / 2;
            const centerY = containerRect.height / 2;

            // í´ë¦­ëœ ì¢Œí‘œë¥¼ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œì˜ ìƒëŒ€ ì¢Œí‘œë¡œ ë³€í™˜ (ì¤‘ì‹¬ì´ (0,0)ì´ ë˜ë„ë¡)
            const relativeX = clickX - containerRect.left - centerX;
            const relativeY = clickY - containerRect.top - centerY;

            // ì¤‘ì‹¬ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬ ê³„ì‚°
            const distance = Math.sqrt(relativeX * relativeX + relativeY * relativeY);

            const maxRadius = containerRect.width / 2; // ê°€ì¥ ë°”ê¹¥ìª½ ë§ì˜ ë°˜ì§€ë¦„

            let points = 0;
            // ê°€ì¥ ì•ˆìª½ ë§ë¶€í„° ë°”ê¹¥ìª½ìœ¼ë¡œ ê²€ì‚¬ (ê±°ë¦¬ê°€ ì‘ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜)
            for (let i = 0; i < targetRingsConfig.length; i++) {
                const ring = targetRingsConfig[i];
                const ringRadius = maxRadius * ring.sizeRatio;
                if (distance <= ringRadius) {
                    points = ring.score;
                    break;
                }
            }
            return points;
        }

        function handleShot(event) {
            if (!gameActive) return;

            // í´ë¦­ëœ ì •í™•í•œ ì¢Œí‘œ ê°€ì ¸ì˜¤ê¸°
            const clickX = event.clientX;
            const clickY = event.clientY;

            // hitMarker í‘œì‹œ
            hitMarker.style.left = `${clickX}px`;
            hitMarker.style.top = `${clickY}px`;
            hitMarker.style.opacity = '1';
            setTimeout(() => {
                hitMarker.style.opacity = '0'; // ì ì‹œ í›„ ì‚¬ë¼ì§€ê²Œ
            }, 300); // 0.3ì´ˆ í›„ ì‚¬ë¼ì§

            const points = calculateScore(clickX, clickY);
            score += points;
            scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
            messageDisplay.textContent = `${points}ì  íšë“!`;
            messageDisplay.style.color = points > 0 ? '#28a745' : '#dc3545'; // ì ìˆ˜ì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½
            setTimeout(() => messageDisplay.textContent = '', 500); // ë©”ì‹œì§€ 0.5ì´ˆ í›„ ì œê±°
        }

        function startGame(duration) {
            if (gameActive) return; // ì´ë¯¸ ê²Œì„ ì¤‘ì´ë©´ ì‹œì‘ ì•ˆí•¨

            selectedDuration = duration;
            score = 0;
            timeLeft = duration;
            gameActive = true;

            startButton30.disabled = true;
            startButton60.disabled = true;
            resetButton.style.display = 'none'; // ê²Œì„ ì‹œì‘ ì‹œ ë¦¬ì…‹ ë²„íŠ¼ ìˆ¨ê¹€

            scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
            timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
            messageDisplay.textContent = 'ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ê³¼ë…ì„ í´ë¦­í•˜ì„¸ìš”!';
            messageDisplay.style.color = '#2e8b57';

            gameInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;

                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000); // 1ì´ˆë§ˆë‹¤ íƒ€ì´ë¨¸ ê°ì†Œ
        }

        function endGame() {
            clearInterval(gameInterval);
            gameActive = false;
            messageDisplay.textContent = `ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}ì `;
            messageDisplay.style.color = '#c2185b';

            startButton30.disabled = false;
            startButton60.disabled = false;
            resetButton.style.display = 'inline-block'; // ê²Œì„ ì¢…ë£Œ ì‹œ ë¦¬ì…‹ ë²„íŠ¼ í‘œì‹œ
        }

        function resetGame() {
            endGame(); // í˜¹ì‹œ ëª¨ë¥¼ íƒ€ì´ë¨¸ ì¤‘ì§€
            score = 0;
            timeLeft = selectedDuration; // ì„ íƒí–ˆë˜ ì‹œê°„ìœ¼ë¡œ ë‹¤ì‹œ ì´ˆê¸°í™”
            scoreDisplay.textContent = `ì ìˆ˜: ${score}`;
            timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
            messageDisplay.textContent = 'ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!';
            messageDisplay.style.color = '#c2185b';

            startButton30.disabled = false;
            startButton60.disabled = false;
            resetButton.style.display = 'none';
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        targetContainer.addEventListener('click', handleShot);
        startButton30.addEventListener('click', () => startGame(30)); // 30ì´ˆ ì‹œì‘
        startButton60.addEventListener('click', () => startGame(60)); // 1ë¶„ ì‹œì‘
        resetButton.addEventListener('click', resetGame);

        // ì´ˆê¸° ê³¼ë… ë§ ìƒì„±
        createTargetRings();

        // ìœˆë„ìš° í¬ê¸° ë³€ê²½ ì‹œ ê³¼ë…íŒ í¬ê¸° ë° ë§ ì¬ìƒì„± (ë°˜ì‘í˜•)
        window.addEventListener('resize', createTargetRings);

        // í„°ì¹˜ ì´ë²¤íŠ¸ë„ ì²˜ë¦¬ (ëª¨ë°”ì¼)
        targetContainer.addEventListener('touchstart', (event) => {
            event.preventDefault(); // ê¸°ë³¸ í„°ì¹˜ ë™ì‘ (ìŠ¤í¬ë¡¤ ë“±) ë°©ì§€
            handleShot(event.touches[0]); // ì²« ë²ˆì§¸ í„°ì¹˜ ì§€ì  ì‚¬ìš©
        });

        // ì´ˆê¸° íƒ€ì´ë¨¸ í‘œì‹œ (ê¸°ë³¸ 30ì´ˆ)
        timerDisplay.textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
    </script>
</body>
</html>